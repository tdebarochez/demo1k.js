<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>js1k demo</title>
</head>

<body>
<canvas id="c">your browser is too old</canvas>
<script>d=document,C=d.getElementById("c"),c=C.getContext("2d"),h=400,u=800,M=Math,r=M.random,e=M.round,P=M.pow,H=" js1k.com",w=40,a=[],p=[],m=h/2,l=50,X=h,Y=200,k=0,C.width=u,C.height=h,T="fillStyle",o="length";while(l--){a.push(new (function(){var f=e(r()*20)*w,v=r()*h,q=H[e(r()*8)],j=e(r()*10)+5;this.d=function(){(v+=j)>h+w&&(f=e(r()*20)*w)&(v=0);c.fillText(q,f-w,v);H[f/w-1]==q&&v>m-15&&v<m+15&&p.indexOf(q)<0&&G<9&&p.push(q)}}))}t=setInterval(function(){B=a[o],G=p[o];c[T]="rgba(0,0,0,.5)";c.rect(0,0,u,h);c.fill();c[T]=W;G==9&&B>0&&a.shift()&&B--;while(B--){a[B].d()}c[T]=g;while(G--){c.fillText(p[G],H.indexOf(p[G])*w,m)}i=c.getImageData(0,0,u,h);z=i.data;l=z[o];k+=2;while(l-=4){b=99-P(P(X-(l/4)%u,2)+P(Y-M.floor(l/4/u),2),0.5);if(0<b){n=M.sin(b/5+(k%50)/8)*M.cos(b/5+(k%50)/8)*4;z[l+3]-=b*n}}c.putImageData(i,0,0)},80);c.font=w+"px Arial";d.onmousemove=function(f){X=f.clientX;Y=f.clientY};g=c.createLinearGradient(0,180,0,m);g.b=g.addColorStop;g.b(0,W="#7d7");g.b(0.5,"#fff");g.b(0.5,W);g.b(1,"#afa");</script>

</body>
</html>
